매일 퀴즈 데이터를 점검하고, 부족한 카테고리에 새 문제를 추가하는 일일 관리 작업을 수행합니다.

**각 단계는 반드시 검증 후 다음 단계로 진행합니다. 검증 실패 시 즉시 중단하고 오류를 보고합니다.**

## 단계 1: 파일 구조 파악

src/data/questions.ts 파일을 읽고 다음을 확인합니다:

- QuizQuestion 타입 구조 (id, category, question, options, answer, explanation)
- 카테고리 목록: 한국사, 과학, 지리, 일반상식
- 파일 내 섹션 구분 방식 (주석 기반)
- 코드 스타일 (들여쓰기, 후행 쉼표 등)

**검증**: 파일이 정상적으로 읽히고, 예상 구조와 일치하는지 확인합니다.
**실패 조건**: 파일이 없거나, 타입 구조가 예상과 다르면 중단합니다.

출력:
```
### 1단계: 파일 구조 파악 ✅/❌
- 파일 경로: src/data/questions.ts
- 타입 구조: (정상/비정상)
- 코드 스타일: (확인된 스타일 요약)
```

## 단계 2: 현재 문제 개수와 분포 확인

전체 문제와 카테고리별 분포를 산출합니다:

- 총 문제 수
- 카테고리별 문제 수
- 카테고리별 정답 분포 (answer 0~3 각각 몇 개)
- 현재 마지막 ID 번호

**검증**: 모든 문제의 answer 값이 0~3 범위인지, id가 중복되지 않는지 확인합니다.
**실패 조건**: answer 범위 초과, id 중복, options 길이가 4가 아닌 문제가 있으면 중단합니다.

출력:
```
### 2단계: 현재 문제 분포 ✅/❌

| 카테고리 | 문제 수 | 정답 분포 (0/1/2/3) |
|---------|--------|-------------------|
| 한국사   |        |                   |
| 과학     |        |                   |
| 지리     |        |                   |
| 일반상식  |        |                   |
| **합계** |        |                   |

- 마지막 ID:
- 데이터 무결성: (정상/오류 내용)
```

## 단계 3: 부족한 카테고리 파악

카테고리별 문제 수를 비교하여 추가가 필요한 카테고리를 결정합니다:

- 문제 수가 가장 적은 카테고리를 우선 대상으로 선정
- 동률이면 정답 분포가 가장 편향된 카테고리를 선택
- 해당 카테고리 내 주제 키워드를 나열하여 다루지 않은 영역을 파악

**검증**: 대상 카테고리와 추가 사유가 명확한지 확인합니다.
**실패 조건**: 없음 (정보 분석 단계)

출력:
```
### 3단계: 부족 카테고리 분석 ✅

- 추가 대상 카테고리:
- 선정 사유:
- 기존 주제 목록: (ID: 주제 키워드 나열)
- 미다룬 주제 후보: (3개 이상 제시)
```

## 단계 4: 중복 체크 후 새 문제 작성

선정된 카테고리에 문제 1개를 작성합니다:

### 4-1. 중복 체크
- 기존 문제들의 주제/키워드와 새 문제가 겹치지 않는지 확인
- question 텍스트 유사도 검사 (동일 인물, 사건, 개념 여부)

### 4-2. 문제 작성
```typescript
{
  id: (마지막 ID + 1),
  category: '카테고리명',
  question: '문제 내용',
  options: ['보기1', '보기2', '보기3', '보기4'],
  answer: (0~3, 정답 분포 균형 고려),
  explanation: '해설 내용',
},
```

### 4-3. 교차 검증 (CLAUDE.md 가이드라인)
- 정답 유일성: 정답이 하나뿐인가?
- 최상급 표현: "가장/최초/최대" 등에 기준과 범위가 명시되었는가?
- 시의성: 시간에 따라 변할 수 있는 정보에 시점이 명시되었는가?
- 오답 품질: 오답이 그럴듯하고 관련성이 있는가?

**검증**: 교차 검증 4개 항목 모두 통과해야 합니다.
**실패 조건**: 정답 유일성 또는 최상급 표현 검증 실패 시 중단합니다.

출력:
```
### 4단계: 새 문제 작성 ✅/❌

| 항목 | 내용 |
|------|------|
| ID | |
| 카테고리 | |
| 난이도 | (상/중/하) |
| 정답 번호 | |
| 정답 | |

| 검증 항목 | 결과 | 비고 |
|----------|------|------|
| 중복 체크 | 없음/주의 | |
| 정답 유일성 | OK/주의 | |
| 최상급 표현 | 해당없음/OK/주의 | |
| 시의성 | 해당없음/OK/주의 | |
| 오답 품질 | OK/주의 | |
| 정답 분포 | OK/주의 | 변경 전 → 변경 후 |
```

## 단계 5: 코드 삽입 및 형식 검증

새 문제를 src/data/questions.ts에 삽입하고 검증합니다:

- 해당 카테고리 섹션의 마지막 문제 뒤에 삽입
- 기존 코드 스타일(들여쓰기 2칸, 후행 쉼표, 작은따옴표)과 동일하게 작성
- 삽입 후 `npx tsc --noEmit`으로 타입 체크 실행
- `npx eslint src/data/questions.ts`로 린트 체크 실행

**검증**: 타입 체크와 린트 모두 통과해야 합니다.
**실패 조건**: 타입 에러 또는 린트 에러 발생 시 수정을 시도하고, 수정 실패 시 변경을 되돌리고 중단합니다.

출력:
```
### 5단계: 형식 검증 ✅/❌
- TypeScript 타입 체크: (통과/실패)
- ESLint 린트 체크: (통과/실패)
- 삽입 위치: (라인 번호)
```

## 단계 6: 데이터 백업

변경된 파일을 git으로 커밋합니다:

- `git add src/data/questions.ts`
- 커밋 메시지: `feat: add [카테고리] quiz question (ID [번호])`
- 커밋 후 `git status`로 정상 반영 확인

**검증**: 커밋이 정상적으로 생성되었는지 확인합니다.
**실패 조건**: git 커밋 실패 시 오류 내용을 보고합니다.

출력:
```
### 6단계: 데이터 백업 ✅/❌
- 커밋 해시:
- 커밋 메시지:
```

## 단계 7: 실행 결과 보고

전체 작업 결과를 종합 보고합니다:

```
---

## 일일 퀴즈 관리 결과 보고

| 단계 | 작업 | 결과 |
|------|------|------|
| 1 | 파일 구조 파악 | ✅/❌ |
| 2 | 문제 분포 확인 | ✅/❌ |
| 3 | 부족 카테고리 분석 | ✅/❌ |
| 4 | 새 문제 작성 및 검증 | ✅/❌ |
| 5 | 코드 삽입 및 형식 검증 | ✅/❌ |
| 6 | 데이터 백업 (git commit) | ✅/❌ |

### 변경 요약
- 추가된 문제: ID [번호] ([카테고리])
- 변경 전 총 문제 수: → 변경 후:
- 정답 분포 변화: (해당 카테고리)

### 다음 작업 제안
- (정답 분포 편향이 있는 카테고리)
- (문제 수가 적은 카테고리)
- (미다룬 주제 영역)
```
